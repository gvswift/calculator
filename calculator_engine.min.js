function getTotal(){if(CIF=document.getElementById("cif"),""===currency.value||""===terms.value||Number(fob.value)<1)return alert("Please insert appropriate value information!"),void(Number(fob.value)<1?document.getElementById("fob").focus():""===document.getElementById("currency").value?document.getElementById("currency").focus():document.getElementById("terms").focus());if("xcd"===currency.value)if("cif"===terms.value)cifec=1*Number(fob.value);else if("cfr"===terms.value){if(""===ins.value)return alert("Please insert insurance."),void ins.focus();cifec=1*(Number(fob.value)+Number(ins.value))}else{if(""===frt.value)return alert("Please insert freight."),void frt.focus();if(""===ins.value)return alert("Please insert insurance."),void ins.focus();cifec=1*(Number(fob.value)+Number(frt.value)+Number(ins.value))}else if("cif"===terms.value)cifec=2.717*Number(fob.value);else if("cfr"===terms.value){if(""===ins.value)return alert("Please insert insurance."),void ins.focus();cifec=2.717*(Number(fob.value)+Number(ins.value))}else{if(""===frt.value)return alert("Please insert freight."),void frt.focus();if(""===ins.value)return alert("Please insert insurance."),void ins.focus();cifec=2.717*(Number(fob.value)+Number(frt.value)+Number(ins.value))}CIF.value=moneyfm.format(cifec)}function autoInsurance(){let e=document.getElementById("autoIns");if(0==e.checked)return ins.value="",void(document.getElementById("cif").value="");"cif"!==terms.value&&""==ins.value&&("cfr"===terms.value?ins_val=.01*Number(fob.value):"fob"===terms.value&&(ins_val=.01*(Number(fob.value)+Number(frt.value))),document.getElementById("ins").value=ins_val.toFixed(2))}function termsFN(){"cif"===terms.value?(document.getElementById("frt").disabled=!0,document.getElementById("ins").disabled=!0,document.getElementById("frt").value="",document.getElementById("ins").value="",document.getElementById("cif").value="",document.getElementById("autoIns").disabled=!0):"cfr"===terms.value?(document.getElementById("frt").disabled=!0,document.getElementById("ins").disabled=!1,document.getElementById("frt").value="",document.getElementById("autoIns").disabled=!1):(document.getElementById("fob").disabled=!1,document.getElementById("frt").disabled=!1,document.getElementById("ins").disabled=!1,document.getElementById("autoIns").disabled=!1)}function resetValues(){let e=document.querySelectorAll(".value_Input");e.forEach(e=>{e.value=""}),document.getElementById("fob").disabled=!1,document.getElementById("frt").disabled=!1,document.getElementById("ins").disabled=!1,document.getElementById("autoIns").disabled=!0,document.getElementById("autoIns").checked=!1,resetAllDuties(),resetSpecs(),check_waiver()}function resetSpecs(){let e=document.querySelectorAll(".specs_Inp");e.forEach(e=>{e.value=""}),resetAllDuties()}function resetAllDuties(){let e=document.querySelector(".waiver");e.checked=!1,document.getElementById("hs").value="";let t=document.querySelector(".duty-div"),a=t.querySelectorAll("input");a.forEach(e=>{e.value=""}),document.getElementById("waiver").disabled=!0}function resetAmounts(){document.getElementById("iduty_Amount").value="",document.getElementById("etax_Amount").value="",document.getElementById("csc_Amount").value="",document.getElementById("vs_Amount").value="",document.getElementById("vat_Amount").value="",document.getElementById("total_DutiesInp").value=""}function heading_Duty(){let e=document.getElementById("cif").value,t=document.getElementById("hs").value,a=Number(document.getElementById("seats").value),n=document.getElementById("age").value,c=Number(document.getElementById("cc_s").value),s=(Number(document.getElementById("weight").value),document.getElementById("options").value),u=document.getElementById("source").value;if(""===t)document.getElementById("waiver").disabled=!0;else if("8701"===t)""===n||""===e?(alert("Customs value and Vehicle age are required for heading 8701."),hs.value="",resetAllDuties(),document.getElementById("year").focus()):"dumper"===u?(alert('Dumper does not belong to "8701". Please try "8704". \nYou may also choose another \'source\'. '),hs.value="",resetAllDuties(),document.getElementById("source").focus()):(baseIDRate=5,baseETRate=35,baseCSCRate=6,baseVATBase=cifec*baseIDRate/100+cifec*baseETRate/100+cifec*baseCSCRate/100+cifec,baseVATRate=16,document.getElementById("iduty_Rate").value=baseIDRate+"%",document.getElementById("etax_Rate").value=baseETRate+"%",document.getElementById("csc_Rate").value=baseCSCRate+"%",document.getElementById("vat_Rate").value=baseVATRate+"%",document.getElementById("vb_Amount").value=moneyfm.format(baseVATBase),document.getElementById("vs_Amount").value="",resetAmounts());else if("8702"===t)a<1||""===n||""===e?(alert("Customs value ,Vehicle age and seating capacity are required for heading 8702."),resetAllDuties(),document.getElementById("seats").focus()):a<10?(alert('"8702" carries a seating capacity of 10 or more.'),resetAllDuties(),document.getElementById("seats").focus()):"dumper"===u?(alert('Dumper does not belong to "8702". Please try "8704". \nYou may also choose another \'source\'. '),hs.value="",resetAllDuties(),document.getElementById("source").focus()):(baseIDRate=10,baseETRate=35,baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16,document.getElementById("iduty_Rate").value=baseIDRate+"%",document.getElementById("etax_Rate").value=baseETRate+"%",document.getElementById("csc_Rate").value=baseCSCRate+"%",document.getElementById("vat_Rate").value=baseVATRate+"%",document.getElementById("vb_Amount").value=moneyfm.format(baseVATBase),resetAmounts(),calculateSurcharge());else if("8703"===t)if(""===n||""===e||""===u||c<0)alert("Customs value, vehicle age, power source and cc's are required for heading 8703."),hs.value="",resetAllDuties(),document.getElementById("cc_s").focus();else if("dumper"===u)alert('Dumper does not belong to "8703". Please try "8704". \nYou may also choose another \'source\'. '),hs.value="",resetAllDuties(),document.getElementById("source").focus();else{if("electric"===u)baseIDRate=20,baseETRate=20,baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16;else if("other"===u)baseIDRate=30,baseETRate=30,baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16;else if("gas"===u){let e=gas8703_Rates.findLastIndex(e=>e.ccs<=c);baseIDRate=gas8703_Rates[e].rates[0],baseETRate=gas8703_Rates[e].rates[1],baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16}else if("diesel"===u){let e=diesel8703_Rates.findLastIndex(e=>e.ccs<=c);baseIDRate=diesel8703_Rates[e].rates[0],baseETRate=diesel8703_Rates[e].rates[1],baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16}document.getElementById("iduty_Rate").value=baseIDRate+"%",document.getElementById("etax_Rate").value=baseETRate+"%",document.getElementById("csc_Rate").value=baseCSCRate+"%",document.getElementById("vat_Rate").value=baseVATRate+"%",document.getElementById("vb_Amount").value=moneyfm.format(baseVATBase),resetAmounts(),calculateSurcharge()}else if("8704"===t)if(""===n||0===cifec||tonnage<=0||""===u)alert("Customs value, vehicle age, power source and tonnage are required for heading 8704."),hs.value="",resetAllDuties(),document.getElementById("weight").focus();else{if("electric"===u)baseIDRate=10,baseETRate=30,baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16;else if("other"===u)baseIDRate=10,baseETRate=60,baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16;else if("gas"===u||"diesel"===u){let e=gasOrDiesel8704_Rates.findLastIndex(e=>e.ton<=tonnage);baseIDRate=gasOrDiesel8704_Rates[e].rates[0],baseETRate=gasOrDiesel8704_Rates[e].rates[1],baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16}else if("dumper"===u){let e=dumper8704_Rates.findLastIndex(e=>e.ton<=tonnage);baseIDRate=dumper8704_Rates[e].rates[0],baseETRate=dumper8704_Rates[e].rates[1],baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16}document.getElementById("iduty_Rate").value=baseIDRate+"%",document.getElementById("etax_Rate").value=baseETRate+"%",document.getElementById("csc_Rate").value=baseCSCRate+"%",document.getElementById("vat_Rate").value=baseVATRate+"%",document.getElementById("vb_Amount").value=moneyfm.format(baseVATBase),resetAmounts(),calculateSurcharge()}else"8705"===t&&(n<0||""===e||""===s?(alert("Customs value, vehicle age and an option are required for heading 8705."),hs.value="",resetAllDuties(),document.getElementById("options").focus()):"dumper"===u?(alert('Dumper does not belong to "8705". Please try "8704". \nYou may also choose another \'source\'. '),hs.value="",resetAllDuties(),document.getElementById("source").focus()):("fire_fighting"===s?(baseIDRate=0,baseETRate=0,baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16):(baseIDRate=5,baseETRate=0,baseCSCRate=6,baseVATBase=baseIDRate*cifec/100+baseETRate*cifec/100+baseCSCRate*cifec/100+cifec,baseVATRate=16),document.getElementById("iduty_Rate").value=baseIDRate+"%",document.getElementById("etax_Rate").value=baseETRate+"%",document.getElementById("csc_Rate").value=baseCSCRate+"%",document.getElementById("vat_Rate").value=baseVATRate+"%",document.getElementById("vb_Amount").value=moneyfm.format(baseVATBase),resetAmounts(),calculateSurcharge()));document.getElementById("waiver").disabled=!1}function calculateSurcharge(){let e=document.getElementById("hs").value,t=Number(document.getElementById("cc_s").value),a=document.getElementById("age").value,n=document.getElementById("source").value,c=Number(document.getElementById("weight").value),s=Number(document.getElementById("seats").value),u=document.getElementById("options").value;if("8701"===e)baseSurcharge=0;else if("8702"===e){let e=ageFactors8702_8704.findLastIndex(e=>e.age<=a),t=seatingFactors8702.findLastIndex(e=>e.seats<=s),n=cifMatrix8702.findIndex(e=>e.cif<=cifec);age_factor=ageFactors8702_8704[e].factor,seating_capacity_factor=seatingFactors8702[t].factor,cifFactor=cifMatrix8702[n].factors[e],baseSurcharge=surcharge_base*age_factor*seating_capacity_factor*cifFactor,alert(`Composition of Surcharge:\nBase Surcharge :${surcharge_base}\nAge Factor: ${age_factor}\nSeating Capacity Factor: ${seating_capacity_factor}\nCIF Factor : ${cifFactor}`)}else if("8703"===e){let e=ageFactors8703.findLastIndex(e=>e.age<=a),c=cifMatrix8703.findIndex(e=>e.cif<=cifec);if(cifFactor=cifMatrix8703[c].factors[e],"gas"===n||"diesel"===n){let a=engineSizeFactors8703.findLastIndex(e=>e.ccs<=t);engineSizeFactor=engineSizeFactors8703[a].factor,age_factor=ageFactors8703[e].factor,baseSurcharge=surcharge_base*age_factor*engineSizeFactor*cifFactor,alert(`Composition of Surcharge:\nBase Surcharge :${surcharge_base}\nAge factor :${age_factor}\nEngine Size Factor :${engineSizeFactor}\nCIF Factor :${cifFactor}`)}else if("electric"===n){let a=rangeFactors8703.findIndex(e=>e.range<=t);range_factor=rangeFactors8703[a].factor,age_factor=ageFactors8703Electric[e].factor,baseSurcharge=surcharge_base*age_factor*range_factor*cifFactor,alert(`Composition of Surcharge:\nBase Surcharge : ${surcharge_base}\nAge Factor :${age_factor}\nRange Factor :${range_factor}\nCIF Factor :${cifFactor} `)}else"other"===n&&(classification_factor=1,age_factor=ageFactors8703Electric[e].factor,baseSurcharge=surcharge_base*age_factor*classification_factor*cifFactor,alert(`Composition of Surcharge:\nBase Surcharge :${surcharge_base}\nAge Factor :${age_factor}\nClassification Factor :${classification_factor}\nCIF Factor :${cifFactor}`))}else if("8704"===e){let e=ageFactors8702_8704.findLastIndex(e=>e.age<=a),t=tonnageFactors8704.findLastIndex(e=>e.tons<=c),n=cifMatrix8704.findIndex(e=>e.cif<=cifec);age_factor=ageFactors8702_8704[e].factor,tonnage_factor=tonnageFactors8704[t].factor,cifFactor=cifMatrix8704[n].factors[e],baseSurcharge=surcharge_base*age_factor*tonnage_factor*cifFactor,alert(`Composition of Surcharge:\nBase Surcharge :${surcharge_base}\nAge Factor :${age_factor}\nTonnage Factor :${tonnage_factor}\nCIF Factor :${cifFactor}`)}else if("8705"===e)if("fire_fighting"===u){let e=ageFactors8705.findLastIndex(e=>e.age<=a),t=cifMatrix8705.findIndex(e=>e.cif<=cifec);age_factor=ageFactors8705[e].factor,specialPurposeFactor=" None",cifFactor=cifMatrix8705[t].factors[e],baseSurcharge=surcharge_base*age_factor*cifFactor,alert(`Composition of Surcharge:\nBase Surcharge :${surcharge_base}\nAge Factor :${age_factor}\nSpecial Purpose Factor :${specialPurposeFactor}\nCIF Factor :${cifFactor}`)}else{let e=ageFactors8705.findLastIndex(e=>e.age<=a),t=cifMatrix8705.findIndex(e=>e<=cifec);age_factor=ageFactors8705[e].factor,specialPurposeFactor=1,cifFactor=cifMatrix8705[t].factors[e],baseSurcharge=surcharge_base*age_factor*specialPurposeFactor*cifFactor,alert(`Composition of Surcharge:\nBase Surcharge :${surcharge_base}\nAge Factor :${age_factor}\nSpecial Purpose Factor :${specialPurposeFactor}\nCIF Factor :${cifFactor}`)}document.getElementById("vs_Amount").value=baseSurcharge.toFixed(2)}function calculateDuties(){if(""!==document.getElementById("hs").value){apply_Waiver();let e=document.getElementById("iduty_Rate").value,t=Number(e.substr(0,e.length-1))/100,a=document.getElementById("etax_Rate").value,n=Number(a.substr(0,a.length-1))/100,c=document.getElementById("csc_Rate").value,s=Number(c.substr(0,c.length-1))/100,u=document.getElementById("vat_Rate").value,o=Number(u.substr(0,u.length-1))/100;idAmount=cifec*t,etAmount=cifec*n,cscAmount=cifec*s,vatAmount=baseVATBase*o,document.getElementById("iduty_Amount").value=idAmount.toFixed(2),document.getElementById("etax_Amount").value=etAmount.toFixed(2),document.getElementById("csc_Amount").value=cscAmount.toFixed(2),document.getElementById("vat_Amount").value=vatAmount.toFixed(2);let l=Number(document.getElementById("iduty_Amount").value),d=Number(document.getElementById("etax_Amount").value),r=Number(document.getElementById("csc_Amount").value),m=Number(document.getElementById("vs_Amount").value),i=Number(document.getElementById("vat_Amount").value);totalDuties=l+d+r+m+i,totalCost=totalDuties+cifec,document.getElementById("total_DutiesInp").value=moneyfm.format(totalDuties),document.getElementById("overAllCost").value=moneyfm.format(totalCost)}}function apply_Waiver(){if(id_w=document.getElementById("iduty_Waiver").value,et_w=document.getElementById("etax_Waiver").value,csc_w=document.getElementById("csc_Waiver").value,vs_w=document.getElementById("vs_Waiver").value,vat_w=document.getElementById("vat_Waiver").value,""!=id_w){let e=baseIDRate*(100-id_w)/100;document.getElementById("iduty_Rate").value=e.toFixed(2)+"%"}else document.getElementById("iduty_Rate").value=baseIDRate+"%";if(""!=et_w){let e=baseETRate*(100-et_w)/100;document.getElementById("etax_Rate").value=e.toFixed(2)+"%"}else document.getElementById("etax_Rate").value=baseETRate+"%";if(""!=csc_w){let e=baseCSCRate*(100-csc_w)/100;document.getElementById("csc_Rate").value=e.toFixed(2)+"%"}else document.getElementById("csc_Rate").value=baseCSCRate+"%";if("8701"===hs.value)document.getElementById("vs_Amount").value=0;else if(""!=vs_w){let e=baseSurcharge*(100-vs_w)/100;document.getElementById("vs_Amount").value=e.toFixed(2)}else document.getElementById("vs_Amount").value=baseSurcharge.toFixed(2);if(""!=vat_w){let e=baseVATRate*(100-vat_w)/100;document.getElementById("vat_Rate").value=e.toFixed(2)+"%"}else document.getElementById("vat_Rate").value=baseVATRate+"%"}function check_waiver(){let e=document.getElementById("waiver"),t=document.getElementsByClassName("tax_Waiver");if(1==e.checked)for(let e=0;e<t.length;e++)t[e].disabled=!1;else{if(0==e.checked)for(let e=0;e<t.length;e++)t[e].disabled=!0,t[e].value="";resetAllDuties()}}let baseIDRate,baseETRate,baseCSCRate,baseVATRate,baseSurcharge,age_factor,engineSizeFactor,cifFactor,seating_capacity_factor,classification_factor,idAmount,etAmount,cscAmount,vatAmount,surchargeAmount,cifec,totalDuties,id_w,et_w,csc_w,vs_w,vat_w,baseVATBase=0,specialPurposeFactor=0,totalCost=0,ins_val=0,fob=document.getElementById("fob"),frt=document.getElementById("frt"),ins=document.getElementById("ins"),_date=new Date,stringDate=_date.toString(),theDate=stringDate.slice(0,15);document.getElementById("datelabel").innerHTML=theDate;let title=document.getElementById("titlelabel");title.style.textAlign="center";let moneyfm=new Intl.NumberFormat("en-VC",{style:"currency",currency:"XCD"});document.getElementById("importer").focus(),document.getElementById("importer").addEventListener("keyup",e=>{document.getElementById("importer").value=document.getElementById("importer").value.toUpperCase()}),document.getElementById("importer").addEventListener("keydown",e=>{"Enter"===e.key&&document.getElementById("fob").focus()}),document.getElementById("fob").addEventListener("keydown",e=>{"Enter"===e.key&&(document.getElementById("fob").value=Number(fob.value).toFixed(2),"cif"===terms.value?document.getElementById("total_button").focus():"cfr"===terms.value?document.getElementById("ins").focus():document.getElementById("frt").focus())}),document.getElementById("frt").addEventListener("keydown",e=>{if("Enter"===e.key){let e=Number(document.getElementById("frt").value);frt.value=e.toFixed(2),document.getElementById("ins").focus()}}),document.getElementById("ins").addEventListener("keydown",e=>{if("Enter"===e.key){let e=Number(document.getElementById("ins").value);ins.value=e.toFixed(2),document.getElementById("total_button").focus()}}),document.getElementById("terms").addEventListener("change",e=>{document.getElementById("cif").value="",document.getElementById("autoIns").checked=!1}),document.getElementById("currency").addEventListener("change",e=>{document.getElementById("cif").value=""}),document.getElementById("make").addEventListener("keyup",e=>{document.getElementById("make").value=document.getElementById("make").value.toUpperCase()}),document.getElementById("make").addEventListener("keydown",e=>{"Enter"===e.key&&document.getElementById("model").focus()}),document.getElementById("model").addEventListener("keyup",e=>{document.getElementById("model").value=document.getElementById("model").value.toUpperCase()}),document.getElementById("model").addEventListener("keydown",e=>{"Enter"===e.key&&document.getElementById("chassis").focus()}),document.getElementById("chassis").addEventListener("keyup",e=>{document.getElementById("chassis").value=document.getElementById("chassis").value.toUpperCase()}),document.getElementById("chassis").addEventListener("keydown",e=>{"Enter"===e.key&&document.getElementById("year").focus()}),document.getElementById("year").addEventListener("keyup",e=>{if(4===document.getElementById("year").value.length){let e=Number(_date.getFullYear()),t=Number(document.getElementById("year").value);if(t>e)alert("Invalid Data!"),year.value="",document.getElementById("year").focus();else{let a=e-t;a>12?(alert("Invalid data!"),alert("Vehicle cannot be over 12 years."),year.value="",document.getElementById("year").focus()):(age.value=a,document.getElementById("hs").value="select",resetAllDuties(),document.getElementById("source").focus())}}}),document.getElementById("source").addEventListener("change",e=>{document.getElementById("hs").value="select",resetAllDuties(),document.getElementById("cc_s").focus()}),document.getElementById("cc_s").addEventListener("keyup",e=>{resetAllDuties()}),document.getElementById("cc_s").addEventListener("keydown",e=>{"Enter"===e.key&&(document.getElementById("hs").focus(),resetAllDuties())}),document.getElementById("seats").addEventListener("keydown",e=>{"Enter"===e.key&&(document.getElementById("hs").focus(),resetAllDuties())}),document.getElementById("seats").addEventListener("keyup",e=>{resetAllDuties()}),document.getElementById("weight").addEventListener("keyup",e=>{resetAllDuties()}),document.getElementById("weight").addEventListener("keydown",e=>{"Enter"===e.key&&(resetAllDuties(),document.getElementById("hs").focus())}),document.getElementById("options").addEventListener("change",e=>{resetAllDuties(),document.getElementById("hs").focus()}),document.getElementById("iduty_Waiver").addEventListener("keydown",e=>{if("Enter"===e.key){let e=Number(document.getElementById("iduty_Waiver").value);if(e<0||e>100)return alert("Invalid Data!"),document.getElementById("iduty_Waiver").focus(),void(document.getElementById("iduty_Waiver").value="");document.getElementById("etax_Waiver").focus()}}),document.getElementById("etax_Waiver").addEventListener("keydown",e=>{if("Enter"===e.key){let e=Number(document.getElementById("etax_Waiver").value);if(e<1||e>100)return alert("Invalid Data!"),document.getElementById("etax_Waiver").focus(),void(document.getElementById("etax_Waiver").value="");document.getElementById("csc_Waiver").focus()}}),document.getElementById("csc_Waiver").addEventListener("keydown",e=>{if("Enter"===e.key){let e=Number(document.getElementById("csc_Waiver").value);if(e<1||e>100)return alert("Invalid Data!"),document.getElementById("csc_Waiver").focus(),void(document.getElementById("csc_Waiver").value="");document.getElementById("vs_Waiver").focus()}}),document.getElementById("vs_Waiver").addEventListener("keydown",e=>{if("Enter"===e.key){let e=Number(document.getElementById("vs_Waiver").value);if(e<1||e>100)return alert("Invalid Data!"),document.getElementById("vs_Waiver").focus(),void(document.getElementById("vs_Waiver").value="");document.getElementById("vat_Waiver").focus()}}),document.getElementById("vat_Waiver").addEventListener("keydown",e=>{if("Enter"===e.key){let e=Number(document.getElementById("vat_Waiver").value);if(e<1||e>100)return alert("Invalid Data!"),document.getElementById("vat_Waiver").focus(),void(document.getElementById("vat_Waiver").value="")}});